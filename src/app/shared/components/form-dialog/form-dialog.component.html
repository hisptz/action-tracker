<div class="position-relative form-container">
  <h5 mat-dialog-title>Action Tracker Form</h5>
  <form [formGroup]="formGroup" (ngSubmit)="onSubmitForm()">
    <mat-dialog-content *ngIf="formDialogData" class="form-content">
      <div
        *ngFor="let dataElement of formDialogData.dataElements"
        [hidden]="dataElement.isHidden"
      >
        <!-- text input -->
        <mat-form-field
          class="w-100"
          *ngIf="
            dataElement.valueType === formFieldType.TEXT &&
            !dataElement.hasLegend &&
            !(dataElement.code === 'ACTION_PERIOD')
          "
        >
          <mat-label>{{ dataElement.name }}</mat-label>
          <input
            matInput
            [formControlName]="dataElement.id"
            id="{{ dataElement?.id }}"
          />
        </mat-form-field>
        <!-- end of text input -->

        <!-- number input -->
        <mat-form-field
          class="w-100"
          *ngIf="dataElement.valueType === formFieldType.NUMBER"
        >
          <mat-label>{{ dataElement.name }}</mat-label>
          <input
            matInput
            type="number"
            [formControlName]="dataElement.id"
            id="{{ dataElement?.id }}"
          />
        </mat-form-field>
        <!-- end of number input -->

        <!-- text area -->
        <mat-form-field
          class="w-100"
          *ngIf="dataElement.valueType === formFieldType.LONG_TEXT"
        >
          <mat-label>{{ dataElement.name }}</mat-label>
          <textarea
            matInput
            name=""
            rows="4"
            [formControlName]="dataElement.id"
            id="{{ dataElement?.id }}"
          ></textarea>
        </mat-form-field>
        <!-- end of text area -->

        <!-- select field -->
        <mat-form-field class="w-100" *ngIf="dataElement.hasLegend">
          <mat-label>{{ dataElement.name }}</mat-label>
          <mat-select
            [formControlName]="dataElement.id"
            id="{{ dataElement?.id }}"
          >
            <mat-option
              *ngFor="let legendSetItem of legendSetItems$ | async"
              [value]="legendSetItem?.id"
            >
              {{ legendSetItem?.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <!-- end of select field -->

        <!-- date field -->
        <mat-form-field
          class="w-100"
          *ngIf="dataElement.valueType === formFieldType.DATE"
        >
          <mat-label>{{ dataElement.name }}</mat-label>
          <input
            matInput
            [formControlName]="dataElement?.id || dataElement?.formControlName"
            [min]="minDate"
            [max]="maxDate"
            [matDatepicker]="reviewDate"
            placeholder="Choose a date"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="reviewDate"
          ></mat-datepicker-toggle>
          <mat-datepicker #reviewDate></mat-datepicker>
        </mat-form-field>
        <!-- end of date field -->
      </div>
    </mat-dialog-content>

    <mat-dialog-actions class="form-action" v>
      <button mat-button mat-dialog-close>Cancel</button>
      <button
        mat-flat-button
        color="primary"
        type="submit"
        [disabled]="!formGroup.valid"
      >
        Save
      </button>
    </mat-dialog-actions>
  </form>
</div>
