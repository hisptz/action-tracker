<div class="intervention-filter-container">
  <!--intervention available and selected section-->
  <div class="intervention-header">
    <div class="intervention-available-header">
      <span
        [matTooltip]="
          (availableInterventions$ | async)?.length + ' Available for selection'
        "
        class="badge badge-secondary intervention-badge"
        >{{ (availableInterventions$ | async)?.length }} Available</span
      >
      <button
        matTooltip="Select all interventions"
        *ngIf="availableInterventions$ | async as availableInterventions"
        mat-icon-button
        (click)="onSelectAllInterventions($event, availableInterventions)"
      >
        <i class="fa fa-arrow-right"></i>
      </button>
    </div>
    <div class="intervention-selected-header">
      <button
        matTooltip="Unselect all interventions"
        mat-icon-button
        (click)="onDeselectAllInterventions($event)"
      >
        <i class="fa fa-arrow-left"></i>
      </button>
      <span class="badge badge-primary intervention-badge">
        {{ selectedInterventions.length }} Selected</span
      >
    </div>
  </div>
  <!--end of intervention available and selected section-->

  <!--intervention body-->
  <div class="intervention-body">
    <div class="intervention-available-body">
      <ul class="intervention-list">
        <li
          class="intervention-loading-block"
          *ngIf="loadingInterventions$ | async"
        >
          <div>
            <img src="assets/icons/balls-3.svg" alt="" />
            <div>Discovering interventions...</div>
          </div>
        </li>
        <li
          *ngFor="let availableIntervention of availableInterventions$ | async"
          matTooltip="Select {{ availableIntervention.name }}"
        >
          <a  
          *ngIf="availableInterventions$ | async as availableInterventions"
          [ngClass]="{
            'selected-active': isInArray(
              selectedItemsList,
              availableIntervention?.id
            )
          }"
          (click)="
          onClickToSelectData(availableIntervention,availableInterventions, $event, 'SELECT')
        "
          (dblclick)="moveSingleSelectedDataItem(availableIntervention, $event)">
            {{ availableIntervention.name }}
          </a>
        </li>
      </ul>
    </div>
    <div class="intervention-transfer-body">
      <button
      type="button"
      class="transfer-btn"
      (click)="moveSelectedItems($event)"
      [disabled]="!selectedItemsList.length"
      mat-icon-button
    >
      <mat-icon>arrow_forward</mat-icon>
    </button>
    <button
      type="button"
      class="transfer-btn"
      (click)="moveDeselectedItems($event)"
      [disabled]="!deselectedItemsList.length"
      mat-icon-button
    >
      <mat-icon>arrow_back</mat-icon>
    </button>
    </div>
    <div class="intervention-selected-body">
      <ul class="intervention-list">
        <li
          *ngFor="let selectedIntervention of selectedInterventions"
          matTooltip="Remove {{ selectedIntervention.name }}"
        >
          <a 
          *ngIf="availableInterventions$ | async as availableInterventions"
          [ngClass]="{
            'selected-active': isInArray(
              deselectedItemsList,
              selectedIntervention?.id
            )
          }"
          (click)="onClickToSelectData(selectedIntervention,availableInterventions, $event, 'DESELECT')"
          (dblclick)="moveSingleDeselectedDataItem(selectedIntervention,$event)">
            <span class="badge badge-info">{{ selectedIntervention.type }}</span
            >&nbsp;
            <span>{{ selectedIntervention.name }}</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
  <!--end of intervention body-->

  <!--intervention footer-->
  <div class="ngx-dhis2-intervention__intervention-buttons">
    <div>
      <button mat-stroked-button (click)="onClose($event)">
        Close</button
      >&nbsp;
      <button
        mat-flat-button
        color="primary"
        [disabled]="selectedInterventions?.length === 0"
        (click)="onUpdate($event)"
      >
        Update
      </button>
    </div>
  </div>
  <!--end of intervention footer-->
</div>
