<div class="row mb-2 justify-content-end">
  <div
    class="col-12 d-flex justify-content-end"
    *ngIf="(data$ | async)?.length > 0"
  >
    <app-report-download (downloadType)="downloadTable($event)">
    </app-report-download>
  </div>
</div>
<div id="pdfExport">
  <table
    class="table table-bordered table-responsive"
    #rootCauseAnalysisTable
    *ngIf="configuration$ | async as rootCauseAnalysisConfiguration"
  >
    <thead class="table-header-cell">
      <tr>
        <th width="1%">SN.</th>
        <th
          [hidden]="dataElement.isHidden"
          [ngClass]="{ 'hide-on-export': dataElement.isHidden }"
          *ngFor="
            let dataElement of rootCauseAnalysisConfiguration.dataElements
          "
        >
          {{ dataElement.name }}
        </th>
        <th *ngIf="!isReport" class="hide-on-export">Add Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td colspan="100%">
          <!-- <div>{{ (notification$ | async)?.message }}</div>
          <mat-progress-bar mode="indeterminate"></mat-progress-bar> -->
        </td>
      </tr>
    </tbody>

    <tbody *ngIf="data$ | async as rootCauseAnalysisData" [@listEnter]></tbody>
  </table>

  <div *ngIf="(configurationLoading$ | async) || !(configuration$ | async)">
    <mat-card>
      <mat-card-content>
        <div>Discovering Configurations</div>
        <mat-progress-bar
          mode="indeterminate"
        ></mat-progress-bar></mat-card-content
    ></mat-card>
  </div>
</div>
<div *ngIf="!isReport">
  <context-menu
    [useBootstrap4]="true"
    *ngIf="configuration$ | async as rootCauseAnalysisConfiguration"
  >
    <ng-template contextMenuItem (execute)="onActionEdit($event.item)">
      <a class="context-menu-item">
        <i class="fa fa-pencil" style="float: right; color: green"></i> Edit
      </a>
    </ng-template>
    <ng-template
      contextMenuItem
      (execute)="
        onActionDelete(
          $event.item,
          rootCauseAnalysisConfiguration?.dataElements
        )
      "
    >
      <a class="context-menu-item">
        <i class="fa fa-trash-o" style="float: right; color: red"></i> Delete
      </a>
    </ng-template>
  </context-menu>
</div>
